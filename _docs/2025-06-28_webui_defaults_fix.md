# WebUIãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ä¸æ•´åˆä¿®æ­£ãƒ­ã‚°

**æ—¥ä»˜**: 2025-06-28  
**ä½œæ¥­è€…**: Claude Code  
**å®Œäº†ã‚¿ã‚¹ã‚¯**: ãƒ–ãƒ©ã‚¦ã‚¶UIéŠ˜æŸ„è¿½åŠ æ™‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ä¸æ•´åˆä¿®æ­£

## ğŸš¨ ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œ

### é‡å¤§ãªä¸æ•´åˆå•é¡Œ
ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰éŠ˜æŸ„è¿½åŠ ã™ã‚‹éš›ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒä¸­å¤®ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¨å¤§å¹…ã«ä¹–é›¢ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ¤æ˜ã€‚

#### ä¿®æ­£å‰ã®ä¸æ•´åˆçŠ¶æ³
```javascript
// symbols_enhanced.html resetFilterParams()é–¢æ•°ï¼ˆä¿®æ­£å‰ï¼‰
document.getElementById('minLeverage').value = '1.0';     // ä¸­å¤®: 3.0 
document.getElementById('minConfidence').value = '0.35';  // ä¸­å¤®: 0.5
document.getElementById('minRiskReward').value = '0.5';   // ä¸­å¤®: 1.2 âš ï¸é‡å¤§
```

#### HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®è¡¨ç¤ºå€¤
```html
<!-- ä¿®æ­£å‰ -->
<input id="minLeverage" value="1.0">     <!-- ä¸­å¤®: 3.0 -->
<input id="minConfidence" value="0.35">  <!-- ä¸­å¤®: 0.5 -->
```

### å½±éŸ¿ç¯„å›²
- **min_risk_reward**: 0.5 vs 1.2 = **240%ã®å·®**ï¼ˆå–å¼•åˆ¤å®šã«é‡å¤§å½±éŸ¿ï¼‰
- **min_leverage**: 1.0 vs 3.0 = **300%ã®å·®**
- **min_confidence**: 35% vs 50% = **43%ã®å·®**

## ğŸ”§ å®Ÿæ–½ã—ãŸä¿®æ­£

### 1. JavaScript resetFilterParams()é–¢æ•°ã®ä¿®æ­£

**ãƒ•ã‚¡ã‚¤ãƒ«**: `web_dashboard/templates/symbols_enhanced.html`

```javascript
// ä¿®æ­£å¾Œï¼ˆline 1058-1061ï¼‰
// ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ¡ä»¶ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼ˆä¸­å¤®ã‚·ã‚¹ãƒ†ãƒ ã¨çµ±ä¸€ï¼‰
document.getElementById('minLeverage').value = '3.0';
document.getElementById('minConfidence').value = '0.5';
document.getElementById('minRiskReward').value = '1.2';
```

### 2. HTMLãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ä¿®æ­£

```html
<!-- ä¿®æ­£å¾Œ -->
<input id="minLeverage" value="3.0">
<small class="text-muted">çµ±ä¸€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 3.0 (ä¸­å¤®ç®¡ç†)</small>

<input id="minConfidence" value="0.5">
<small class="text-muted">çµ±ä¸€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0.5 (50%) (ä¸­å¤®ç®¡ç†)</small>
```

### 3. èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆã®æ›´æ–°
- æ—§: "ç¾åœ¨: 1.5 â†’ æ¨å¥¨: 1.0 (SOLå¯¾å¿œ)"
- æ–°: "çµ±ä¸€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 3.0 (ä¸­å¤®ç®¡ç†)"

## âœ… ä¿®æ­£çµæœã®æ¤œè¨¼

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœ
```
python tests_organized/ui/test_webui_defaults_consistency.py
..
----------------------------------------------------------------------
Ran 2 tests in 0.034s

OK
```

### æ¤œè¨¼é …ç›®
1. **JavaScript resetFilterParams()å€¤**: ä¸­å¤®ã‚·ã‚¹ãƒ†ãƒ ã¨ä¸€è‡´ âœ…
2. **HTMLãƒ•ã‚©ãƒ¼ãƒ valueå±æ€§**: ä¸­å¤®ã‚·ã‚¹ãƒ†ãƒ ã¨ä¸€è‡´ âœ…  
3. **å‹•çš„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå€¤**: {{ defaults.min_risk_reward }}ä½¿ç”¨ç¢ºèª âœ…
4. **èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆæ•´åˆæ€§**: çµ±ä¸€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«æ›´æ–° âœ…

## ğŸ¯ ä¿®æ­£åŠ¹æœ

### Before (ä¿®æ­£å‰)
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™ã€ãƒœã‚¿ãƒ³æŠ¼ä¸‹ â†’ **é–“é•ã£ãŸå€¤ï¼ˆ0.5ï¼‰**è¨­å®š
- å–å¼•åˆ¤å®šã§æœŸå¾…ã¨ç•°ãªã‚‹å‹•ä½œ
- ã‚·ã‚¹ãƒ†ãƒ é–“ã®å€¤ã®ä¸æ•´åˆ

### After (ä¿®æ­£å¾Œ)
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™ã€ãƒœã‚¿ãƒ³æŠ¼ä¸‹ â†’ **æ­£ã—ã„å€¤ï¼ˆ1.2ï¼‰**è¨­å®š
- å…¨ã‚·ã‚¹ãƒ†ãƒ ã§çµ±ä¸€ã•ã‚ŒãŸãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ä½¿ç”¨
- ä¸­å¤®ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å®Œå…¨æ•´åˆ

## ğŸ“Š çµ±ä¸€é”æˆçŠ¶æ³

### ç¾åœ¨ã®ä¸€å…ƒç®¡ç†çŠ¶æ³
```
config/defaults.json (Single Source of Truth)
â”œâ”€â”€ min_risk_reward: 1.2
â”œâ”€â”€ min_leverage: 3.0
â””â”€â”€ min_confidence: 0.5

ä½¿ç”¨ç®‡æ‰€ï¼ˆå…¨ã¦çµ±ä¸€æ¸ˆã¿ï¼‰:
â”œâ”€â”€ timeframe_conditions.json â†’ "use_default" âœ…
â”œâ”€â”€ trading_conditions.json â†’ "use_default" âœ…
â”œâ”€â”€ WebUI HTML forms â†’ æ­£ã—ã„å€¤è¡¨ç¤º âœ…
â””â”€â”€ WebUI JavaScript â†’ æ­£ã—ã„å€¤è¨­å®š âœ…
```

## ğŸš€ ä»Šå¾Œã®ä¿å®ˆæ€§å‘ä¸Š

### å®Ÿè£…ã•ã‚ŒãŸä¿è­·æ©Ÿèƒ½
1. **WebUIçµ±ä¸€æ€§ãƒ†ã‚¹ãƒˆ**: è‡ªå‹•çš„ã«WebUIã¨ä¸­å¤®ã‚·ã‚¹ãƒ†ãƒ ã®ä¸€è‡´ã‚’æ¤œè¨¼
2. **å‹•çš„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå€¤**: min_risk_rewardã¯{{ defaults.min_risk_reward }}ã§è‡ªå‹•å–å¾—
3. **é›†ä¸­ç®¡ç†**: ä»Šå¾Œã®å€¤å¤‰æ›´ã¯ defaults.json 1ç®‡æ‰€ã®ã¿

### é•·æœŸçš„æ”¹å–„ææ¡ˆ
1. ä»–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚å‹•çš„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå€¤åŒ–
2. JavaScript ã§ã‚‚APIçµŒç”±ã§ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤å–å¾—
3. WebUIãƒ†ã‚¹ãƒˆã®ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

## ğŸ“ é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

- **ä¿®æ­£æ¸ˆã¿**: `web_dashboard/templates/symbols_enhanced.html`
- **æ–°è¦ä½œæˆ**: `tests_organized/ui/test_webui_defaults_consistency.py`
- **å‚ç…§**: `config/defaults.json`

**å®Œäº†æ—¥æ™‚**: 2025-06-28 22:37  
**ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 100% (2/2 tests passed)  
**é‡è¦åº¦**: ğŸš¨ Critical Fixï¼ˆå–å¼•åˆ¤å®šã«ç›´æ¥å½±éŸ¿ï¼‰