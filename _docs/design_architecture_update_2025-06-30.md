# ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ›´æ–° - æ”¹å–„ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

**æ›´æ–°æ—¥**: 2025å¹´6æœˆ30æ—¥  
**å¯¾è±¡**: ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã¨Early Exitå®Ÿè£…ã®è¨­è¨ˆæ–‡æ›¸

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    High Leverage Bot                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Auto Symbol Training (Entry Point)                        â”‚
â”‚  â”œâ”€ Early Fail Validator                                   â”‚
â”‚  â”œâ”€ Data Validation                                        â”‚
â”‚  â”œâ”€ Backtest Execution                                     â”‚
â”‚  â”œâ”€ Result Verification & Error Tracking âœ¨ NEW           â”‚
â”‚  â””â”€ Progress Management                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  High Leverage Bot Orchestrator                            â”‚
â”‚  â”œâ”€ STEP 1: Data Fetch                                     â”‚
â”‚  â”œâ”€ STEP 2: Support/Resistance Analysis                    â”‚
â”‚  â”œâ”€ STEP 3: ML Prediction                                  â”‚
â”‚  â”œâ”€ STEP 4: BTC Correlation Analysis                       â”‚
â”‚  â”œâ”€ STEP 5: Market Context Analysis                        â”‚
â”‚  â”œâ”€ STEP 6: Leverage Decision                              â”‚
â”‚  â””â”€ AnalysisResult Integration âœ¨ NEW                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Error Tracking & Progress Systems                         â”‚
â”‚  â”œâ”€ AnalysisResult Class âœ¨ NEW                            â”‚
â”‚  â”œâ”€ File-Based Progress Tracker                            â”‚
â”‚  â”œâ”€ User-Friendly Message Generator âœ¨ NEW                 â”‚
â”‚  â””â”€ Improvement Suggestion System âœ¨ NEW                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Data & Storage Layer                                      â”‚
â”‚  â”œâ”€ SQLite Analysis Database                               â”‚
â”‚  â”œâ”€ Execution Log Database                                 â”‚
â”‚  â”œâ”€ Progress Files (/tmp/progress_*.json)                  â”‚
â”‚  â””â”€ Real Prepared Data Cache                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ æ–°è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### 1. AnalysisResult ã‚¯ãƒ©ã‚¹

**å ´æ‰€**: `engines/analysis_result.py`

```python
@dataclass
class AnalysisResult:
    """
    åˆ†æçµæœã®è©³ç´°æƒ…å ±ç®¡ç†ã‚¯ãƒ©ã‚¹
    
    ç›®çš„:
    - Early Exitç†ç”±ã®è©³ç´°è¨˜éŒ²
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
    - å„ã‚¹ãƒ†ãƒ¼ã‚¸ã®å®Ÿè¡Œçµæœè¿½è·¡
    - JSONå¤‰æ›ã«ã‚ˆã‚‹APIå¿œç­”å¯¾å¿œ
    """
    
    # åŸºæœ¬æƒ…å ±
    symbol: str
    timeframe: str
    strategy: str
    execution_id: Optional[str] = None
    
    # å®Ÿè¡ŒçŠ¶æ…‹
    completed: bool = False
    early_exit: bool = False
    exit_stage: Optional[AnalysisStage] = None
    exit_reason: Optional[ExitReason] = None
    
    # ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥çµæœ
    stage_results: List[StageResult] = None
    
    # ãƒ‡ãƒ¼ã‚¿æƒ…å ±
    total_data_points: Optional[int] = None
    analysis_period_start: Optional[datetime] = None
    analysis_period_end: Optional[datetime] = None
    
    # æœ€çµ‚çµæœï¼ˆæˆåŠŸæ™‚ã®ã¿ï¼‰
    recommendation: Optional[Dict[str, Any]] = None
    
    # ã‚¨ãƒ©ãƒ¼æƒ…å ±
    error_details: Optional[str] = None
    
    # ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
    started_at: datetime = None
    completed_at: Optional[datetime] = None
```

### 2. Early Exitã‚¹ãƒ†ãƒ¼ã‚¸å®šç¾©

```python
class AnalysisStage(Enum):
    """åˆ†æã‚¹ãƒ†ãƒ¼ã‚¸ã®å®šç¾©"""
    DATA_FETCH = "data_fetch"
    SUPPORT_RESISTANCE = "support_resistance_analysis"
    ML_PREDICTION = "ml_prediction"
    BTC_CORRELATION = "btc_correlation_analysis"
    MARKET_CONTEXT = "market_context_analysis"
    LEVERAGE_DECISION = "leverage_decision"
    COMPLETED = "completed"

class ExitReason(Enum):
    """Early Exitç†ç”±ã®å®šç¾©"""
    NO_SUPPORT_RESISTANCE = "no_support_resistance_levels"
    INSUFFICIENT_DATA = "insufficient_data"
    ML_PREDICTION_FAILED = "ml_prediction_failed"
    BTC_DATA_INSUFFICIENT = "btc_data_insufficient"
    MARKET_CONTEXT_FAILED = "market_context_failed"
    LEVERAGE_CONDITIONS_NOT_MET = "leverage_conditions_not_met"
    DATA_QUALITY_POOR = "data_quality_poor"
    EXECUTION_ERROR = "execution_error"
```

### 3. ã‚¹ãƒ†ãƒ¼ã‚¸çµæœè¿½è·¡

```python
@dataclass
class StageResult:
    """å„ã‚¹ãƒ†ãƒ¼ã‚¸ã®å®Ÿè¡Œçµæœ"""
    stage: AnalysisStage
    success: bool
    execution_time_ms: float
    data_processed: Optional[int] = None
    items_found: Optional[int] = None
    error_message: Optional[str] = None
    additional_info: Optional[Dict[str, Any]] = None
```

## ğŸ”„ å‡¦ç†ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

### 1. çµ±åˆåˆ†æãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[Auto Symbol Training] --> B[Early Fail Validation]
    B --> C[Data Validation]
    C --> D[Create AnalysisResult]
    D --> E[High Leverage Bot Orchestrator]
    
    E --> F1[STEP 1: Data Fetch]
    F1 --> G1{Data Available?}
    G1 -->|No| H1[Mark Early Exit: INSUFFICIENT_DATA]
    G1 -->|Yes| F2[STEP 2: Support/Resistance]
    
    F2 --> G2{Levels Found?}
    G2 -->|No| H2[Mark Early Exit: NO_SUPPORT_RESISTANCE]
    G2 -->|Yes| F3[STEP 3: ML Prediction]
    
    F3 --> G3{ML Success?}
    G3 -->|No| H3[Mark Early Exit: ML_PREDICTION_FAILED]
    G3 -->|Yes| F4[STEP 4: BTC Correlation]
    
    F4 --> G4{BTC Data OK?}
    G4 -->|No| H4[Mark Early Exit: BTC_DATA_INSUFFICIENT]
    G4 -->|Yes| F5[STEP 5: Market Context]
    
    F5 --> G5{Context OK?}
    G5 -->|No| H5[Mark Early Exit: MARKET_CONTEXT_FAILED]
    G5 -->|Yes| F6[STEP 6: Leverage Decision]
    
    F6 --> G6{Leverage OK?}
    G6 -->|No| H6[Mark Early Exit: LEVERAGE_CONDITIONS_NOT_MET]
    G6 -->|Yes| I[Mark Completed]
    
    H1 --> J[Generate User Message]
    H2 --> J
    H3 --> J
    H4 --> J
    H5 --> J
    H6 --> J
    I --> J
    
    J --> K[Display Results & Suggestions]
```

### 2. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[AnalysisResult] --> B{Early Exit?}
    B -->|Yes| C[Get Exit Stage & Reason]
    B -->|No| D{Completed?}
    
    C --> E[Stage Name Mapping]
    E --> F[Reason Message Mapping]
    F --> G[Generate User-Friendly Message]
    
    D -->|Yes| H[Generate Success Message]
    D -->|No| I[Generate Failure Message]
    
    G --> J[Add Data Context]
    H --> J
    I --> J
    
    J --> K[Generate Improvement Suggestions]
    K --> L[Return Complete Message]
```

### 3. çµæœæ¤œè¨¼ãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[Symbol Training Complete] --> B[Verify Analysis Results]
    B --> C[Check execution_id Match]
    C --> D{Results Found?}
    
    D -->|Yes| E[Count Signals & Early Exits]
    D -->|No| F[Check Recent Results (10min)]
    
    F --> G{Recent Found?}
    G -->|Yes| H[Use Recent Results]
    G -->|No| I[Check Very Recent (5min)]
    
    I --> J{Very Recent Found?}
    J -->|Yes| K[Use Very Recent + Warn ID Mismatch]
    J -->|No| L[Check Progress Tracker]
    
    L --> M{Early Exit Info?}
    M -->|Yes| N[Extract Early Exit Details]
    M -->|No| O[Mark as Unknown]
    
    E --> P[Generate Summary]
    H --> P
    K --> P
    N --> P
    O --> P
    
    P --> Q[Display Summary]
    Q --> R{Has Results or Exits?}
    R -->|Yes| S[Mark SUCCESS]
    R -->|No| T[Mark FAILED]
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

### 1. AnalysisResult ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

```
Creation â†’ Stage Tracking â†’ Early Exit/Completion â†’ Message Generation â†’ Storage/Response
     â†“            â†“                 â†“                      â†“                 â†“
  Initialize   Add Stage      Mark Exit/Complete    Get User Message    JSON Export
  - symbol     Results        - stage & reason     - friendly text     - API response
  - timeframe  - execution    - error details      - suggestions       - database
  - strategy   - time                              - technical info    - progress
  - exec_id    - data count
```

### 2. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆãƒãƒƒãƒ”ãƒ³ã‚°

```python
# ã‚¹ãƒ†ãƒ¼ã‚¸åãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆæ—¥æœ¬èªï¼‰
STAGE_NAMES = {
    AnalysisStage.DATA_FETCH: "ãƒ‡ãƒ¼ã‚¿å–å¾—",
    AnalysisStage.SUPPORT_RESISTANCE: "ã‚µãƒãƒ¼ãƒˆãƒ»ãƒ¬ã‚¸ã‚¹ã‚¿ãƒ³ã‚¹åˆ†æ",
    AnalysisStage.ML_PREDICTION: "MLäºˆæ¸¬",
    AnalysisStage.BTC_CORRELATION: "BTCç›¸é–¢åˆ†æ",
    AnalysisStage.MARKET_CONTEXT: "å¸‚å ´ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåˆ†æ",
    AnalysisStage.LEVERAGE_DECISION: "ãƒ¬ãƒãƒ¬ãƒƒã‚¸åˆ¤å®š"
}

# ç†ç”±ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ï¼‰
REASON_MESSAGES = {
    ExitReason.NO_SUPPORT_RESISTANCE: "ã‚µãƒãƒ¼ãƒˆãƒ»ãƒ¬ã‚¸ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¬ãƒ™ãƒ«ãŒæ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ",
    ExitReason.INSUFFICIENT_DATA: "åˆ†æã«å¿…è¦ãªååˆ†ãªãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“",
    ExitReason.ML_PREDICTION_FAILED: "MLäºˆæ¸¬ã‚·ã‚¹ãƒ†ãƒ ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",
    # ...
}

# æ”¹å–„ææ¡ˆãƒãƒƒãƒ”ãƒ³ã‚°
IMPROVEMENT_SUGGESTIONS = {
    ExitReason.NO_SUPPORT_RESISTANCE: [
        "ã‚ˆã‚Šé•·ã„åˆ†ææœŸé–“ã‚’è¨­å®šã—ã¦ãã ã•ã„",
        "ç•°ãªã‚‹æ™‚é–“è¶³ï¼ˆ1hâ†’4hã€15mâ†’1hãªã©ï¼‰ã‚’è©¦ã—ã¦ãã ã•ã„",
        "åˆ¥ã®æˆ¦ç•¥ï¼ˆConservative_MLã€Aggressive_MLãªã©ï¼‰ã‚’è©¦ã—ã¦ãã ã•ã„"
    ],
    # ...
}
```

## ğŸ”— çµ±åˆãƒã‚¤ãƒ³ãƒˆè¨­è¨ˆ

### 1. High Leverage Bot Orchestrator çµ±åˆ

```python
class HighLeverageBotOrchestrator:
    def analyze_leverage_opportunity(...) -> AnalysisResult:
        """
        å¾“æ¥ã®Noneè¿”å´ã‹ã‚‰AnalysisResultè¿”å´ã«å¤‰æ›´
        
        å¤‰æ›´ç‚¹:
        - å„ã‚¹ãƒ†ãƒƒãƒ—ã§StageResultã‚’è¨˜éŒ²
        - Early Exitæ™‚ã«AnalysisResultã«ãƒãƒ¼ã‚¯
        - æˆåŠŸæ™‚ã«recommendationã‚’è¨˜éŒ²
        - å®Ÿè¡Œæ™‚é–“ã¨ãƒ‡ãƒ¼ã‚¿é‡ã‚’è¿½è·¡
        """
        
        analysis_result = AnalysisResult(symbol, timeframe, strategy, execution_id)
        
        # STEP 1-6ã®å„æ®µéšã§:
        # 1. é–‹å§‹æ™‚é–“è¨˜éŒ²
        # 2. å‡¦ç†å®Ÿè¡Œ
        # 3. çµæœã‚’StageResultã¨ã—ã¦è¨˜éŒ²
        # 4. å¤±æ•—æ™‚ã¯mark_early_exit()
        # 5. æˆåŠŸæ™‚ã¯æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸
        
        return analysis_result
    
    def analyze_symbol(...) -> Union[Dict, AnalysisResult]:
        """
        äº’æ›æ€§ã®ãŸã‚ã€æˆåŠŸæ™‚ã¯å¾“æ¥ã®è¾æ›¸ã€å¤±æ•—æ™‚ã¯AnalysisResultã‚’è¿”å´
        """
        
        analysis_result = self.analyze_leverage_opportunity(...)
        
        if analysis_result.early_exit or not analysis_result.completed:
            # Early Exitã¾ãŸã¯ã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯AnalysisResultã‚’è¿”ã™
            return analysis_result
        
        # æˆåŠŸæ™‚ã¯å¾“æ¥ã®è¾æ›¸å½¢å¼ã‚’è¿”ã™ï¼ˆä¸‹ä½äº’æ›æ€§ï¼‰
        return {
            'symbol': symbol,
            'timeframe': timeframe,
            # ...å¾“æ¥ã®å½¢å¼
        }
```

### 2. Auto Symbol Training çµ±åˆ

```python
class AutoSymbolTrainer:
    def _verify_analysis_results_detailed(...) -> Dict[str, Any]:
        """
        4æ®µéšã®çµæœæ¤œè¨¼ãƒ—ãƒ­ã‚»ã‚¹:
        1. execution_idå®Œå…¨ä¸€è‡´
        2. éå»10åˆ†ä»¥å†…ã®çµæœ
        3. éå»5åˆ†ä»¥å†…ã®å…¨çµæœ
        4. ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹é€²æ—ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã§Early Exitç¢ºèª
        """
        
    def _display_analysis_summary(...):
        """
        è©³ç´°ãªã‚µãƒãƒªãƒ¼è¡¨ç¤º:
        - ç·è©•ä¾¡æ•°
        - ã‚·ã‚°ãƒŠãƒ«æ¤œå‡ºæ•°
        - Early Exitæ•°ã¨ç†ç”±åˆ¥å†…è¨³
        - ã€Œã‚·ã‚°ãƒŠãƒ«ãªã—ã€ã®æ­£å¸¸æ€§èª¬æ˜
        """
    
    def add_symbol_with_training(...):
        """
        çµæœåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯å¤‰æ›´:
        - has_results OR has_early_exits OR total_evaluations > 0 â†’ SUCCESS
        - ã€Œã‚·ã‚°ãƒŠãƒ«ãªã—ã€ã‚‚æ­£å¸¸ãªçµæœã¨ã—ã¦æ‰±ã†
        - ã‚ˆã‚Šè©³ç´°ãªcompletion_statusè¨­å®š
        """
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

### ãƒ†ã‚¹ãƒˆæ§‹é€ 

```
test_improved_error_tracking.py
â”œâ”€ TestAnalysisResult
â”‚  â”œâ”€ test_creation
â”‚  â”œâ”€ test_early_exit_tracking
â”‚  â”œâ”€ test_stage_result_tracking
â”‚  â”œâ”€ test_user_friendly_messages
â”‚  â””â”€ test_json_serialization
â”œâ”€ TestIntegration
â”‚  â”œâ”€ test_orchestrator_integration
â”‚  â”œâ”€ test_auto_trainer_integration
â”‚  â””â”€ test_sol_analysis_with_error_tracking
â””â”€ TestEdgeCases
   â”œâ”€ test_multiple_early_exits
   â”œâ”€ test_partial_completion
   â””â”€ test_error_recovery
```

### ã‚«ãƒãƒ¬ãƒƒã‚¸è¦ä»¶

- **AnalysisResultã‚¯ãƒ©ã‚¹**: 100%ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸
- **Early Exitãƒ‘ã‚¹**: å…¨6ã‚¹ãƒ†ãƒ¼ã‚¸ã§ã®æ—©æœŸçµ‚äº†ãƒ‘ã‚¹
- **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: å…¨ExitReasonã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
- **JSONå¤‰æ›**: åŒæ–¹å‘å¤‰æ›ï¼ˆto_dict/from_dictï¼‰
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: å®Ÿéš›ã®SOLåˆ†æã§ã®å‹•ä½œç¢ºèª

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …

### ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡

```python
# AnalysisResult 1ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚ãŸã‚Šã®æ¨å®šãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
- åŸºæœ¬å±æ€§: ~200 bytes
- StageResult Ã— 6: ~1.2 KB
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ~500 bytes (å¹³å‡)
- åˆè¨ˆ: ~2 KB per analysis

# 1000ä¸¦åˆ—åˆ†æã§ã®æ¨å®šãƒ¡ãƒ¢ãƒªå½±éŸ¿: ~2 MB
# â†’ ç„¡è¦–ã§ãã‚‹ãƒ¬ãƒ™ãƒ«
```

### å®Ÿè¡Œæ™‚é–“å½±éŸ¿

```python
# è¿½åŠ ã•ã‚Œã‚‹å‡¦ç†æ™‚é–“ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸ã‚ãŸã‚Šï¼‰
- StageResultä½œæˆ: ~0.1ms
- Early Exitåˆ¤å®š: ~0.05ms
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ: ~1msï¼ˆçµ‚äº†æ™‚ã®ã¿ï¼‰
- åˆè¨ˆå½±éŸ¿: ~1.7ms per analysis

# å…¨ä½“ã¸ã®å½±éŸ¿: <0.1%ï¼ˆåˆ†æå‡¦ç†ãŒæ•°ç§’ã®ãŸã‚ï¼‰
```

## ğŸ”® å°†æ¥æ‹¡å¼µè¨­è¨ˆ

### 1. çµ±è¨ˆæƒ…å ±åé›†

```python
class AnalysisStatistics:
    """
    Early Exitçµ±è¨ˆã®åé›†ãƒ»åˆ†æ
    - æˆ¦ç•¥åˆ¥Early Exitå‚¾å‘
    - éŠ˜æŸ„åˆ¥æˆåŠŸ/å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³
    - æ™‚é–“è¶³åˆ¥æœ€é©åŒ–ææ¡ˆ
    """
```

### 2. WebUIçµ±åˆ

```python
class AnalysisResultAPI:
    """
    Web APIã§ã®è©³ç´°ã‚¨ãƒ©ãƒ¼æƒ…å ±æä¾›
    - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—è¡¨ç¤º
    - è©³ç´°ãªã‚¨ãƒ©ãƒ¼ç†ç”±è¡¨ç¤º
    - æ”¹å–„ææ¡ˆã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–è¡¨ç¤º
    """
```

### 3. æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼äºˆæ¸¬

```python
class EarlyExitPredictor:
    """
    éå»ã®Early Exitãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰äºˆæ¸¬
    - ãƒ‡ãƒ¼ã‚¿ç‰¹æ€§ã«ã‚ˆã‚‹äº‹å‰è­¦å‘Š
    - æœ€é©ãªæˆ¦ç•¥ãƒ»æ™‚é–“è¶³æ¨å¥¨
    - å‹•çš„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´
    """
```

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€ã‚·ã‚¹ãƒ†ãƒ ã¯å¤±æ•—ç†ç”±ã‚’æ˜ç¢ºã«è¿½è·¡ãƒ»è¡¨ç¤ºã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å…·ä½“çš„ãªæ”¹å–„ææ¡ˆã‚’æä¾›ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚